
repo

@Query("select b from Book b where b.id = ?1")
    Optional<Book> findBookById(Integer id);

    @Query("select b from Book b where b.title = ?1")
    Optional<Book> findBookByTitle(String title);

    @Query("select b from Book b where upper(b.genre) = upper(?1)")
    List<Book> findBooksByGenre(String genre);



mapper

   @Mapping(target = "id", ignore = true)
    Book toEntity(BookDto bookDto);

    BookDto toDto(Book book);

    List<BookDto>toDtos(List<Book>books);

    @BeanMapping(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)
    Book updateBookFromBookDto(BookDto bookDto, @MappingTarget Book book);
